<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Friend Finder Survey</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  </head>

  <body>
    <div class="container">
      <div class="jumbotron">
        <h1 class="text-center">
          <span class="fas fa-users"></span> Friend Finder Survey
        </h1>
        <hr />
        <h2 class="text-center">
          Answer 10 questions to find a similar friend!
        </h2>
        <p class="text-center">
          Please select an answer from 1 to 10, 1 being "completely disagree"
          and 5 being "completely agree."
        </p>
        <br />
        <form>
          <div class="form-row">
            <div class="col">
              <label for="firstName">First Name</label>
              <input
                type="text"
                id="firstName"
                class="form-control"
                placeholder="Jane"
              />
            </div>
            <div class="col">
              <label for="lastName">Last Name</label>
              <input
                type="text"
                id="lastName"
                class="form-control"
                placeholder="Doe"
              />
            </div>
          </div>
          <br />
          <div class="form-group">
            <label for="question1"
              >I enjoy having deep conversations with others.</label
            >
            <select class="form-control" id="answer1">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div>
          <div class="form-group">
            <label for="question2"
              >Living a healthy lifestyle is important to me.</label
            >
            <select class="form-control" id="answer2">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div>
          <div class="form-group">
            <label for="question3">I am adventurous and spontaneous.</label>
            <select class="form-control" id="answer3">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div>
          <div class="form-group">
            <label for="question4">I enjoy drinking (adult beverages).</label>
            <select class="form-control" id="answer4">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div>
          <div class="form-group">
            <label for="question5"
              >I have an appreciation for nature and animals.</label
            >
            <select class="form-control" id="answer5">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div>
          <div class="form-group">
            <label for="question6">Travel is important to me.</label>
            <select class="form-control" id="answer6">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div>
          <div class="form-group">
            <label for="question7">I am expressive with my emotions.</label>
            <select class="form-control" id="answer7">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div>
          <div class="form-group">
            <label for="question8">I go shopping often.</label>
            <select class="form-control" id="answer8">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div>
          <div class="form-group">
            <label for="question9">I am a sports fan.</label>
            <select class="form-control" id="answer9">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div>
          <div class="form-group">
            <label for="question10">I am a religious person.</label>
            <select class="form-control" id="answer10">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div>

          <button
            type="button"
            class="btn btn-primary btn-lg btn-block"
            id="submitButton"
          >
            Find my friend!
          </button>
        </form>
        <br />
        <footer class="footer">
          <div class="container">
            <p>
              <a href="/api/friends">All Possible Friends</a> |
              <a href="/home">Home</a>
            </p>
          </div>
        </footer>
      </div>
    </div>
  </body>
</html>

<!-- BELOW CODE IS CRITICAL. IT HANDLES HOW FORM DATA IS SENT TO OUR SERVER -->
<script type="text/javascript">
  // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
  // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
  // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
  // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file

  $("#submitButton").on("click", function(event) {
    event.preventDefault();

    // Grab the form elements
    var userAnswers = {
      firstName: $("#firstName").val(),
      lastName: $("#lastName").val(),
      question1: $("#answer1").val(),
      question2: $("#answer2").val(),
      question3: $("#answer3").val(),
      question4: $("#answer4").val(),
      question5: $("#answer5").val(),
      question6: $("#answer6").val(),
      question7: $("#answer7").val(),
      question8: $("#answer8").val(),
      question9: $("#answer9").val(),
      question10: $("#answer10").val()
    };

    console.log(userAnswers);

    // This line is the magic. It"s very similar to the standard ajax function
    // we used.
    // Essentially we give it a URL, we give it the object we want to send,
    // then we have a "callback".
    // The callback is the response of the server.
    // In our case, we set up code in api-routes that "returns" true or false
    // depending on if a tables is available or not.

    // Clear the form when submitting
    $("#firstName").val(""),
      $("#lastName").val(""),
      $("#answer1").val("1");
      $("#answer2").val("1");
      $("#answer3").val("1");
      $("#answer4").val("1");
      $("#answer5").val("1");
      $("#answer6").val("1");
      $("#answer7").val("1");
      $("#answer8").val("1");
      $("#answer9").val("1");
      $("#answer10").val("1");

    $.post("/api/friends", userAnswers, function(data) {
      alert("Yay! Your new friend is...");
    });
  });
</script>
